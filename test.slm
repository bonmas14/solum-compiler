c_string_length : (c_string : ^u8) -> u64 = {
    current_pos : ^u8 = c_string;


    while @current_pos != 0 {
        current_pos = current_pos + 1;
    }

    return current_pos - c_string;
}

get_string : (c_string : ^u8) -> String = {
    str : String = default;

    // we cant automatically dereference
    // thats also what we do on analyzer step,
    
    // but also we can think of analyzer step as a creator of scopes
    // and binder of functions then we generate IR
    // that is actually will need typecheck and so on
    str.size = c_string_length(c_string);
    str.data = c_string;

    return str;
}

main : (argc : Int, argv : ^^ Char) -> Int = {
    if (argc < 1) {
        return -1;
    }

    str : String = get_string(cast(^u8) argv[0]);

    printf(cast(^Char)("%.*s"), cast(Int) str.size, cast(^Char) str.data);
    puts(cast(^Char)(""));

    return str.size;
}
